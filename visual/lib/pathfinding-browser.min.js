!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.PF=e()}}(function(){return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var u=n[a]={exports:{}};t[a][0].call(u.exports,function(e){var n=t[a][1][e];return r(n?n:e)},u,u.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){t.exports=e("./lib/heap")},{"./lib/heap":2}],2:[function(e,t,n){(function(){var e,n,i,r,o,a,s,l,u,h,p,c,d,f,g;i=Math.floor,h=Math.min,n=function(e,t){return e<t?-1:e>t?1:0},u=function(e,t,r,o,a){var s;if(null==r&&(r=0),null==a&&(a=n),r<0)throw new Error("lo must be non-negative");for(null==o&&(o=e.length);r<o;)s=i((r+o)/2),a(t,e[s])<0?o=s:r=s+1;return[].splice.apply(e,[r,r-r].concat(t)),t},a=function(e,t,i){return null==i&&(i=n),e.push(t),f(e,0,e.length-1,i)},o=function(e,t){var i,r;return null==t&&(t=n),i=e.pop(),e.length?(r=e[0],e[0]=i,g(e,0,t)):r=i,r},l=function(e,t,i){var r;return null==i&&(i=n),r=e[0],e[0]=t,g(e,0,i),r},s=function(e,t,i){var r;return null==i&&(i=n),e.length&&i(e[0],t)<0&&(r=[e[0],t],t=r[0],e[0]=r[1],g(e,0,i)),t},r=function(e,t){var r,o,a,s,l,u;for(null==t&&(t=n),s=function(){u=[];for(var t=0,n=i(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)u.push(t);return u}.apply(this).reverse(),l=[],o=0,a=s.length;o<a;o++)r=s[o],l.push(g(e,r,t));return l},d=function(e,t,i){var r;if(null==i&&(i=n),r=e.indexOf(t),r!==-1)return f(e,0,r,i),g(e,r,i)},p=function(e,t,i){var o,a,l,u,h;if(null==i&&(i=n),a=e.slice(0,t),!a.length)return a;for(r(a,i),h=e.slice(t),l=0,u=h.length;l<u;l++)o=h[l],s(a,o,i);return a.sort(i).reverse()},c=function(e,t,i){var a,s,l,p,c,d,f,g,v,y;if(null==i&&(i=n),10*t<=e.length){if(p=e.slice(0,t).sort(i),!p.length)return p;for(l=p[p.length-1],g=e.slice(t),c=0,f=g.length;c<f;c++)a=g[c],i(a,l)<0&&(u(p,a,0,null,i),p.pop(),l=p[p.length-1]);return p}for(r(e,i),y=[],s=d=0,v=h(t,e.length);0<=v?d<v:d>v;s=0<=v?++d:--d)y.push(o(e,i));return y},f=function(e,t,i,r){var o,a,s;for(null==r&&(r=n),o=e[i];i>t&&(s=i-1>>1,a=e[s],r(o,a)<0);)e[i]=a,i=s;return e[i]=o},g=function(e,t,i){var r,o,a,s,l;for(null==i&&(i=n),o=e.length,l=t,a=e[t],r=2*t+1;r<o;)s=r+1,s<o&&!(i(e[r],e[s])<0)&&(r=s),e[t]=e[r],t=r,r=2*t+1;return e[t]=a,f(e,l,t,i)},e=function(){function e(e){this.cmp=null!=e?e:n,this.nodes=[]}return e.push=a,e.pop=o,e.replace=l,e.pushpop=s,e.heapify=r,e.updateItem=d,e.nlargest=p,e.nsmallest=c,e.prototype.push=function(e){return a(this.nodes,e,this.cmp)},e.prototype.pop=function(){return o(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return this.nodes.indexOf(e)!==-1},e.prototype.replace=function(e){return l(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return s(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return r(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return d(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),("undefined"!=typeof t&&null!==t?t.exports:void 0)?t.exports=e:window.Heap=e}).call(this)},{}],3:[function(e,t,n){var i={Always:1,Never:2,IfAtMostOneObstacle:3,OnlyWhenNoObstacles:4};t.exports=i},{}],4:[function(e,t,n){function i(e,t,n){var i;"object"!=typeof e?i=e:(t=e.length,i=e[0].length,n=e),this.width=i,this.height=t,this.nodes=this._buildNodes(i,t,n)}var r=e("./Node"),o=e("./DiagonalMovement");i.prototype._buildNodes=function(e,t,n){var i,o,a=new Array(t);for(i=0;i<t;++i)for(a[i]=new Array(e),o=0;o<e;++o)a[i][o]=new r(o,i);if(void 0===n)return a;if(n.length!==t||n[0].length!==e)throw new Error("Matrix size does not fit");for(i=0;i<t;++i)for(o=0;o<e;++o)n[i][o]&&(a[i][o].walkable=!1);return a},i.prototype.getNodeAt=function(e,t){return this.nodes[t][e]},i.prototype.isWalkableAt=function(e,t){return this.isInside(e,t)&&this.nodes[t][e].walkable},i.prototype.isInside=function(e,t){return e>=0&&e<this.width&&t>=0&&t<this.height},i.prototype.setWalkableAt=function(e,t,n){this.nodes[t][e].walkable=n},i.prototype.getNeighbors=function(e,t){var n=e.x,i=e.y,r=[],a=!1,s=!1,l=!1,u=!1,h=!1,p=!1,c=!1,d=!1,f=this.nodes;if(this.isWalkableAt(n,i-1)&&(r.push(f[i-1][n]),a=!0),this.isWalkableAt(n+1,i)&&(r.push(f[i][n+1]),l=!0),this.isWalkableAt(n,i+1)&&(r.push(f[i+1][n]),h=!0),this.isWalkableAt(n-1,i)&&(r.push(f[i][n-1]),c=!0),t===o.Never)return r;if(t===o.OnlyWhenNoObstacles)s=c&&a,u=a&&l,p=l&&h,d=h&&c;else if(t===o.IfAtMostOneObstacle)s=c||a,u=a||l,p=l||h,d=h||c;else{if(t!==o.Always)throw new Error("Incorrect value of diagonalMovement");s=!0,u=!0,p=!0,d=!0}return s&&this.isWalkableAt(n-1,i-1)&&r.push(f[i-1][n-1]),u&&this.isWalkableAt(n+1,i-1)&&r.push(f[i-1][n+1]),p&&this.isWalkableAt(n+1,i+1)&&r.push(f[i+1][n+1]),d&&this.isWalkableAt(n-1,i+1)&&r.push(f[i+1][n-1]),r},i.prototype.clone=function(){var e,t,n=this.width,o=this.height,a=this.nodes,s=new i(n,o),l=new Array(o);for(e=0;e<o;++e)for(l[e]=new Array(n),t=0;t<n;++t)l[e][t]=new r(t,e,a[e][t].walkable);return s.nodes=l,s},t.exports=i},{"./DiagonalMovement":3,"./Node":6}],5:[function(e,t,n){t.exports={manhattan:function(e,t){return e+t},poweredManhattan:function(e,t){return Math.pow(e+t,2)},extrapoweredManhattan:function(e,t){return Math.pow(e+t,10)},euclidean:function(e,t){return Math.sqrt(e*e+t*t)},octile:function(e,t){var n=Math.SQRT2-1;return e<t?n*e+t:n*t+e},chebyshev:function(e,t){return Math.max(e,t)}}},{}],6:[function(e,t,n){function i(e,t,n){this.x=e,this.y=t,this.walkable=void 0===n||n}t.exports=i},{}],7:[function(e,t,n){function i(e,t){for(var n=[[e.x,e.y]];e.parent;)e=e.parent,n.push([e.x,e.y]);return res={path:n.reverse(),operations:t},res}function r(e,t,n){var r=i(e),o=i(t);return res={path:r.path.concat(o.path.reverse()),operations:n},res}function o(e){var t,n,i,r,o,a=0;for(t=1;t<e.length;++t)n=e[t-1],i=e[t],r=n[0]-i[0],o=n[1]-i[1],a+=Math.sqrt(r*r+o*o);return a}function a(e,t,n,i){var r,o,a,s,l,u,h=Math.abs,p=[];for(a=h(n-e),s=h(i-t),r=e<n?1:-1,o=t<i?1:-1,l=a-s;;){if(p.push([e,t]),e===n&&t===i)break;u=2*l,u>-s&&(l-=s,e+=r),u<a&&(l+=a,t+=o)}return p}function s(e){var t,n,i,r,o,s,l=[],u=e.length;if(u<2)return l;for(o=0;o<u-1;++o)for(t=e[o],n=e[o+1],i=a(t[0],t[1],n[0],n[1]),r=i.length,s=0;s<r-1;++s)l.push(i[s]);return l.push(e[u-1]),l}function l(e,t){var n,i,r,o,s,l,u,h,p,c,d,f=t.length,g=t[0][0],v=t[0][1],y=t[f-1][0],b=t[f-1][1];for(n=g,i=v,s=[[n,i]],l=2;l<f;++l){for(h=t[l],r=h[0],o=h[1],p=a(n,i,r,o),d=!1,u=1;u<p.length;++u)if(c=p[u],!e.isWalkableAt(c[0],c[1])){d=!0;break}d&&(lastValidCoord=t[l-1],s.push(lastValidCoord),n=lastValidCoord[0],i=lastValidCoord[1])}return s.push([y,b]),s}function u(e){if(e.length<3)return e;var t,n,i,r,o,a,s=[],l=e[0][0],u=e[0][1],h=e[1][0],p=e[1][1],c=h-l,d=p-u;for(o=Math.sqrt(c*c+d*d),c/=o,d/=o,s.push([l,u]),a=2;a<e.length;a++)t=h,n=p,i=c,r=d,h=e[a][0],p=e[a][1],c=h-t,d=p-n,o=Math.sqrt(c*c+d*d),c/=o,d/=o,c===i&&d===r||s.push([t,n]);return s.push([h,p]),s}n.backtrace=i,n.biBacktrace=r,n.pathLength=o,n.interpolate=a,n.expandPath=s,n.smoothenPath=l,n.compressPath=u},{}],8:[function(e,t,n){t.exports={Heap:e("heap"),Node:e("./core/Node"),Grid:e("./core/Grid"),Util:e("./core/Util"),DiagonalMovement:e("./core/DiagonalMovement"),Heuristic:e("./core/Heuristic"),AStarFinder:e("./finders/AStarFinder"),BestFirstFinder:e("./finders/BestFirstFinder"),CLAFinder:e("./finders/CLAFinder"),BreadthFirstFinder:e("./finders/BreadthFirstFinder"),DijkstraFinder:e("./finders/DijkstraFinder"),BiAStarFinder:e("./finders/BiAStarFinder"),BiBestFirstFinder:e("./finders/BiBestFirstFinder"),BiBreadthFirstFinder:e("./finders/BiBreadthFirstFinder"),BiDijkstraFinder:e("./finders/BiDijkstraFinder"),IDAStarFinder:e("./finders/IDAStarFinder"),JumpPointFinder:e("./finders/JumpPointFinder")}},{"./core/DiagonalMovement":3,"./core/Grid":4,"./core/Heuristic":5,"./core/Node":6,"./core/Util":7,"./finders/AStarFinder":9,"./finders/BestFirstFinder":10,"./finders/BiAStarFinder":11,"./finders/BiBestFirstFinder":12,"./finders/BiBreadthFirstFinder":13,"./finders/BiDijkstraFinder":14,"./finders/BreadthFirstFinder":15,"./finders/CLAFinder":16,"./finders/DijkstraFinder":17,"./finders/IDAStarFinder":18,"./finders/JumpPointFinder":23,heap:1}],9:[function(e,t,n){function i(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.heuristic=e.heuristic||a.manhattan,this.weight=e.weight||1,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never),this.diagonalMovement===s.Never?this.heuristic=e.heuristic||a.manhattan:this.heuristic=e.heuristic||a.octile}var r=e("heap"),o=e("../core/Util"),a=e("../core/Heuristic"),s=e("../core/DiagonalMovement");i.prototype.findPath=function(e,t,n,i,a){var s=[];console.log("AStar");var l,u,h,p,c,d,f,g,v=new r(function(e,t){return e.f-t.f}),y=a.getNodeAt(e,t),b=a.getNodeAt(n,i),m=this.heuristic,A=this.diagonalMovement,k=this.weight,M=Math.abs,x=Math.SQRT2;for(y.g=0,y.f=0,v.push(y),y.opened=!0,s.push({x:y.x,y:y.y,attr:"opened",value:!0});!v.empty();){if(l=v.pop(),l.closed=!0,s.push({x:l.x,y:l.y,attr:"closed",value:!0}),l===b)return console.log("operations"),o.backtrace(b,s);for(u=a.getNeighbors(l,A),p=0,c=u.length;p<c;++p)h=u[p],h.closed||(d=h.x,f=h.y,g=l.g+(d-l.x===0||f-l.y===0?1:x),(!h.opened||g<h.g)&&(h.g=g,h.h=h.h||k*m(M(d-n),M(f-i)),h.f=h.g+h.h,h.parent=l,h.opened?v.updateItem(h):(v.push(h),h.opened=!0,s.push({x:h.x,y:h.y,attr:"opened",value:!0}))))}return[]},t.exports=i},{"../core/DiagonalMovement":3,"../core/Heuristic":5,"../core/Util":7,heap:1}],10:[function(e,t,n){function i(e){r.call(this,e);var t=this.heuristic;this.heuristic=function(e,n){return 1e6*t(e,n)}}var r=e("./AStarFinder");i.prototype=new r,i.prototype.constructor=i,t.exports=i},{"./AStarFinder":9}],11:[function(e,t,n){function i(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||a.manhattan,this.weight=e.weight||1,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=s.OnlyWhenNoObstacles:this.diagonalMovement=s.IfAtMostOneObstacle:this.diagonalMovement=s.Never),this.diagonalMovement===s.Never?this.heuristic=e.heuristic||a.manhattan:this.heuristic=e.heuristic||a.octile}var r=e("heap"),o=e("../core/Util"),a=e("../core/Heuristic"),s=e("../core/DiagonalMovement");i.prototype.findPath=function(e,t,n,i,a){var s=[];console.log("BiAStar");var l,u,h,p,c,d,f,g,v=function(e,t){return e.f-t.f},y=new r(v),b=new r(v),m=a.getNodeAt(e,t),A=a.getNodeAt(n,i),k=this.heuristic,M=this.diagonalMovement,x=this.weight,W=Math.abs,w=Math.SQRT2,N=1,F=2;for(m.g=0,m.f=0,y.push(m),m.opened=N,s.push({x:m.x,y:m.y,attr:"opened",value:N}),A.g=0,A.f=0,b.push(A),A.opened=F,s.push({x:A.x,y:A.y,attr:"opened",value:F});!y.empty()&&!b.empty();){for(l=y.pop(),l.closed=!0,s.push({x:l.x,y:l.y,attr:"closed",value:!0}),u=a.getNeighbors(l,M),p=0,c=u.length;p<c;++p)if(h=u[p],!h.closed){if(h.opened===F)return o.biBacktrace(l,h,s);d=h.x,f=h.y,g=l.g+(d-l.x===0||f-l.y===0?1:w),(!h.opened||g<h.g)&&(h.g=g,h.h=h.h||x*k(W(d-n),W(f-i)),h.f=h.g+h.h,h.parent=l,h.opened?y.updateItem(h):(y.push(h),h.opened=N,s.push({x:h.x,y:h.y,attr:"opened",value:N})))}for(l=b.pop(),l.closed=!0,s.push({x:l.x,y:l.y,attr:"closed",value:!0}),u=a.getNeighbors(l,M),p=0,c=u.length;p<c;++p)if(h=u[p],!h.closed){if(h.opened===N)return o.biBacktrace(h,l,s);d=h.x,f=h.y,g=l.g+(d-l.x===0||f-l.y===0?1:w),(!h.opened||g<h.g)&&(h.g=g,h.h=h.h||x*k(W(d-e),W(f-t)),h.f=h.g+h.h,h.parent=l,h.opened?b.updateItem(h):(b.push(h),h.opened=F,s.push({x:h.x,y:h.y,attr:"opened",value:F})))}}return[]},t.exports=i},{"../core/DiagonalMovement":3,"../core/Heuristic":5,"../core/Util":7,heap:1}],12:[function(e,t,n){function i(e){r.call(this,e);var t=this.heuristic;this.heuristic=function(e,n){return 1e6*t(e,n)}}var r=e("./BiAStarFinder");i.prototype=new r,i.prototype.constructor=i,t.exports=i},{"./BiAStarFinder":11}],13:[function(e,t,n){function i(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never)}var r=e("../core/Util"),o=e("../core/DiagonalMovement");i.prototype.findPath=function(e,t,n,i,o){var a,s,l,u,h,p=o.getNodeAt(e,t),c=o.getNodeAt(n,i),d=[],f=[],g=this.diagonalMovement,v=0,y=1,b=[];for(d.push(p),p.opened=!0,p.by=v,b.push({x:p.x,y:p.y,attr:"opened",value:!0}),f.push(c),c.opened=!0,c.by=y,b.push({x:c.x,y:c.y,attr:"opened",value:!0});d.length&&f.length;){for(l=d.shift(),l.closed=!0,b.push({x:l.x,y:l.y,attr:"closed",value:!0}),a=o.getNeighbors(l,g),u=0,h=a.length;u<h;++u)if(s=a[u],!s.closed)if(s.opened){if(s.by===y)return r.biBacktrace(l,s,b)}else d.push(s),s.parent=l,s.opened=!0,s.by=v,b.push({x:s.x,y:s.y,attr:"opened",value:!0});for(l=f.shift(),l.closed=!0,b.push({x:l.x,y:l.y,attr:"closed",value:!0}),a=o.getNeighbors(l,g),u=0,h=a.length;u<h;++u)if(s=a[u],!s.closed)if(s.opened){if(s.by===v)return r.biBacktrace(s,l,b)}else f.push(s),s.parent=l,s.opened=!0,s.by=y,b.push({x:s.x,y:s.y,attr:"opened",value:!0})}return[]},t.exports=i},{"../core/DiagonalMovement":3,"../core/Util":7}],14:[function(e,t,n){function i(e){r.call(this,e),this.heuristic=function(e,t){return 0}}var r=e("./BiAStarFinder");i.prototype=new r,i.prototype.constructor=i,t.exports=i},{"./BiAStarFinder":11}],15:[function(e,t,n){function i(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=o.OnlyWhenNoObstacles:this.diagonalMovement=o.IfAtMostOneObstacle:this.diagonalMovement=o.Never)}var r=e("../core/Util"),o=e("../core/DiagonalMovement");i.prototype.findPath=function(e,t,n,i,o){var a,s,l,u,h,p=[],c=[],d=this.diagonalMovement,f=o.getNodeAt(e,t),g=o.getNodeAt(n,i);for(c.push(f),f.opened=!0,p.push({x:f.x,y:f.y,attr:"opened",value:!0});c.length;){if(l=c.shift(),l.closed=!0,p.push({x:l.x,y:l.y,attr:"closed",value:!0}),l===g)return r.backtrace(g,p);for(a=o.getNeighbors(l,d),u=0,h=a.length;u<h;++u)s=a[u],s.closed||s.opened||(c.push(s),s.opened=!0,p.push({x:s.x,y:s.y,attr:"opened",value:!0}),s.parent=l)}return[]},t.exports=i},{"../core/DiagonalMovement":3,"../core/Util":7}],16:[function(e,t,n){function i(e){r.call(this,e),e=e||{},"poweredManhattan"==e.heuristic?this.heuristic=function(e,t){return Math.pow(e+t,2)}:this.heuristic=function(e,t){return Math.pow(e+t,10)}}var r=e("./AStarFinder");i.prototype=new r,i.prototype.constructor=i,t.exports=i},{"./AStarFinder":9}],17:[function(e,t,n){function i(e){r.call(this,e),this.heuristic=function(e,t){return 0}}var r=e("./AStarFinder");i.prototype=new r,i.prototype.constructor=i,t.exports=i},{"./AStarFinder":9}],18:[function(e,t,n){function i(e){e=e||{},this.allowDiagonal=e.allowDiagonal,this.dontCrossCorners=e.dontCrossCorners,this.diagonalMovement=e.diagonalMovement,this.heuristic=e.heuristic||r.manhattan,this.weight=e.weight||1,this.trackRecursion=e.trackRecursion||!1,this.timeLimit=e.timeLimit||1/0,this.diagonalMovement||(this.allowDiagonal?this.dontCrossCorners?this.diagonalMovement=a.OnlyWhenNoObstacles:this.diagonalMovement=a.IfAtMostOneObstacle:this.diagonalMovement=a.Never),this.diagonalMovement===a.Never?this.heuristic=e.heuristic||r.manhattan:this.heuristic=e.heuristic||r.octile}var r=(e("../core/Util"),e("../core/Heuristic")),o=e("../core/Node"),a=e("../core/DiagonalMovement");i.prototype.findPath=function(e,t,n,i,r){var a,s,l,u=0,h=[],p=(new Date).getTime(),c=function(e,t){return this.heuristic(Math.abs(t.x-e.x),Math.abs(t.y-e.y))}.bind(this),d=function(e,t){return e.x===t.x||e.y===t.y?1:Math.SQRT2},f=function(e,t,n,i,a){if(u++,this.timeLimit>0&&(new Date).getTime()-p>1e3*this.timeLimit)return 1/0;var s=t+c(e,v)*this.weight;if(s>n)return s;if(e==v)return i[a]=[e.x,e.y],e;var l,g,y,b,m=r.getNeighbors(e,this.diagonalMovement);for(y=0,l=1/0;b=m[y];++y){if(this.trackRecursion&&(b.retainCount=b.retainCount+1||1,b.tested!==!0&&(b.tested=!0,h.push({x:b.x,y:b.y,attr:"tested",value:!0}))),g=f(b,t+d(e,b),n,i,a+1),g instanceof o)return i[a]=[e.x,e.y],g;this.trackRecursion&&0===--b.retainCount&&(b.tested=!1,h.push({x:b.x,y:b.y,attr:"tested",value:!1})),g<l&&(l=g)}return l}.bind(this),g=r.getNodeAt(e,t),v=r.getNodeAt(n,i),y=c(g,v);for(a=0;!0;++a){if(s=[],l=f(g,0,y,s,0),l===1/0)return res={path:[],operations:[]},res;if(l instanceof o)return res={path:s,operations:h},res;y=l}return res={path:[],operations:[]},res},t.exports=i},{"../core/DiagonalMovement":3,"../core/Heuristic":5,"../core/Node":6,"../core/Util":7}],19:[function(e,t,n){function i(e){r.call(this,e)}var r=e("./JumpPointFinderBase"),o=e("../core/DiagonalMovement");i.prototype=new r,i.prototype.constructor=i,i.prototype._jump=function(e,t,n,i){var r=this.grid,o=e-n,a=t-i;if(!r.isWalkableAt(e,t))return null;if(this.trackJumpRecursion===!0&&(r.getNodeAt(e,t).tested=!0),r.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==o&&0!==a){if(r.isWalkableAt(e-o,t+a)&&!r.isWalkableAt(e-o,t)||r.isWalkableAt(e+o,t-a)&&!r.isWalkableAt(e,t-a))return[e,t];if(this._jump(e+o,t,e,t)||this._jump(e,t+a,e,t))return[e,t]}else if(0!==o){if(r.isWalkableAt(e+o,t+1)&&!r.isWalkableAt(e,t+1)||r.isWalkableAt(e+o,t-1)&&!r.isWalkableAt(e,t-1))return[e,t]}else if(r.isWalkableAt(e+1,t+a)&&!r.isWalkableAt(e+1,t)||r.isWalkableAt(e-1,t+a)&&!r.isWalkableAt(e-1,t))return[e,t];return this._jump(e+o,t+a,e,t)},i.prototype._findNeighbors=function(e){var t,n,i,r,a,s,l,u,h=e.parent,p=e.x,c=e.y,d=this.grid,f=[];if(h)t=h.x,n=h.y,i=(p-t)/Math.max(Math.abs(p-t),1),r=(c-n)/Math.max(Math.abs(c-n),1),0!==i&&0!==r?(d.isWalkableAt(p,c+r)&&f.push([p,c+r]),d.isWalkableAt(p+i,c)&&f.push([p+i,c]),d.isWalkableAt(p+i,c+r)&&f.push([p+i,c+r]),d.isWalkableAt(p-i,c)||f.push([p-i,c+r]),d.isWalkableAt(p,c-r)||f.push([p+i,c-r])):0===i?(d.isWalkableAt(p,c+r)&&f.push([p,c+r]),d.isWalkableAt(p+1,c)||f.push([p+1,c+r]),d.isWalkableAt(p-1,c)||f.push([p-1,c+r])):(d.isWalkableAt(p+i,c)&&f.push([p+i,c]),d.isWalkableAt(p,c+1)||f.push([p+i,c+1]),d.isWalkableAt(p,c-1)||f.push([p+i,c-1]));else for(a=d.getNeighbors(e,o.Always),l=0,u=a.length;l<u;++l)s=a[l],f.push([s.x,s.y]);return f},t.exports=i},{"../core/DiagonalMovement":3,"./JumpPointFinderBase":24}],20:[function(e,t,n){function i(e){r.call(this,e)}var r=e("./JumpPointFinderBase"),o=e("../core/DiagonalMovement");i.prototype=new r,i.prototype.constructor=i,i.prototype._jump=function(e,t,n,i){var r=this.grid,o=e-n,a=t-i;if(!r.isWalkableAt(e,t))return null;if(this.trackJumpRecursion===!0&&(r.getNodeAt(e,t).tested=!0),r.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==o&&0!==a){if(r.isWalkableAt(e-o,t+a)&&!r.isWalkableAt(e-o,t)||r.isWalkableAt(e+o,t-a)&&!r.isWalkableAt(e,t-a))return[e,t];if(this._jump(e+o,t,e,t)||this._jump(e,t+a,e,t))return[e,t]}else if(0!==o){if(r.isWalkableAt(e+o,t+1)&&!r.isWalkableAt(e,t+1)||r.isWalkableAt(e+o,t-1)&&!r.isWalkableAt(e,t-1))return[e,t]}else if(r.isWalkableAt(e+1,t+a)&&!r.isWalkableAt(e+1,t)||r.isWalkableAt(e-1,t+a)&&!r.isWalkableAt(e-1,t))return[e,t];return r.isWalkableAt(e+o,t)||r.isWalkableAt(e,t+a)?this._jump(e+o,t+a,e,t):null},i.prototype._findNeighbors=function(e){var t,n,i,r,a,s,l,u,h=e.parent,p=e.x,c=e.y,d=this.grid,f=[];if(h)t=h.x,n=h.y,i=(p-t)/Math.max(Math.abs(p-t),1),r=(c-n)/Math.max(Math.abs(c-n),1),0!==i&&0!==r?(d.isWalkableAt(p,c+r)&&f.push([p,c+r]),d.isWalkableAt(p+i,c)&&f.push([p+i,c]),(d.isWalkableAt(p,c+r)||d.isWalkableAt(p+i,c))&&f.push([p+i,c+r]),!d.isWalkableAt(p-i,c)&&d.isWalkableAt(p,c+r)&&f.push([p-i,c+r]),!d.isWalkableAt(p,c-r)&&d.isWalkableAt(p+i,c)&&f.push([p+i,c-r])):0===i?d.isWalkableAt(p,c+r)&&(f.push([p,c+r]),d.isWalkableAt(p+1,c)||f.push([p+1,c+r]),d.isWalkableAt(p-1,c)||f.push([p-1,c+r])):d.isWalkableAt(p+i,c)&&(f.push([p+i,c]),d.isWalkableAt(p,c+1)||f.push([p+i,c+1]),d.isWalkableAt(p,c-1)||f.push([p+i,c-1]));else for(a=d.getNeighbors(e,o.IfAtMostOneObstacle),l=0,u=a.length;l<u;++l)s=a[l],f.push([s.x,s.y]);return f},t.exports=i},{"../core/DiagonalMovement":3,"./JumpPointFinderBase":24}],21:[function(e,t,n){function i(e){r.call(this,e)}var r=e("./JumpPointFinderBase"),o=e("../core/DiagonalMovement");i.prototype=new r,i.prototype.constructor=i,i.prototype._jump=function(e,t,n,i){var r=this.grid,o=e-n,a=t-i;if(!r.isWalkableAt(e,t))return null;if(this.trackJumpRecursion===!0&&(r.getNodeAt(e,t).tested=!0),r.getNodeAt(e,t)===this.endNode)return[e,t];if(0!==o&&0!==a){if(this._jump(e+o,t,e,t)||this._jump(e,t+a,e,t))return[e,t]}else if(0!==o){if(r.isWalkableAt(e,t-1)&&!r.isWalkableAt(e-o,t-1)||r.isWalkableAt(e,t+1)&&!r.isWalkableAt(e-o,t+1))return[e,t]}else if(0!==a&&(r.isWalkableAt(e-1,t)&&!r.isWalkableAt(e-1,t-a)||r.isWalkableAt(e+1,t)&&!r.isWalkableAt(e+1,t-a)))return[e,t];return r.isWalkableAt(e+o,t)&&r.isWalkableAt(e,t+a)?this._jump(e+o,t+a,e,t):null},i.prototype._findNeighbors=function(e){var t,n,i,r,a,s,l,u,h=e.parent,p=e.x,c=e.y,d=this.grid,f=[];if(h)if(t=h.x,n=h.y,i=(p-t)/Math.max(Math.abs(p-t),1),r=(c-n)/Math.max(Math.abs(c-n),1),0!==i&&0!==r)d.isWalkableAt(p,c+r)&&f.push([p,c+r]),d.isWalkableAt(p+i,c)&&f.push([p+i,c]),d.isWalkableAt(p,c+r)&&d.isWalkableAt(p+i,c)&&f.push([p+i,c+r]);else{var g;if(0!==i){g=d.isWalkableAt(p+i,c);var v=d.isWalkableAt(p,c+1),y=d.isWalkableAt(p,c-1);g&&(f.push([p+i,c]),v&&f.push([p+i,c+1]),y&&f.push([p+i,c-1])),v&&f.push([p,c+1]),y&&f.push([p,c-1])}else if(0!==r){g=d.isWalkableAt(p,c+r);var b=d.isWalkableAt(p+1,c),m=d.isWalkableAt(p-1,c);g&&(f.push([p,c+r]),b&&f.push([p+1,c+r]),m&&f.push([p-1,c+r])),b&&f.push([p+1,c]),m&&f.push([p-1,c])}}else for(a=d.getNeighbors(e,o.OnlyWhenNoObstacles),l=0,u=a.length;l<u;++l)s=a[l],f.push([s.x,s.y]);return f},t.exports=i},{"../core/DiagonalMovement":3,"./JumpPointFinderBase":24}],22:[function(e,t,n){function i(e){r.call(this,e)}var r=e("./JumpPointFinderBase"),o=e("../core/DiagonalMovement");i.prototype=new r,i.prototype.constructor=i,i.prototype._jump=function(e,t,n,i,r){var o=this.grid,a=e-n,s=t-i;if(!o.isWalkableAt(e,t))return res={jumppoint:null,operations:r},res;if(this.trackJumpRecursion===!0&&(o.getNodeAt(e,t).tested=!0,r.push({x:e,y:t,attr:"tested",value:!0})),o.getNodeAt(e,t)===this.endNode)return res={jumppoint:[e,t],operations:r},res;if(0!==a){if(o.isWalkableAt(e,t-1)&&!o.isWalkableAt(e-a,t-1)||o.isWalkableAt(e,t+1)&&!o.isWalkableAt(e-a,t+1))return res={jumppoint:[e,t],operations:r},res}else{if(0===s)throw new Error("Only horizontal and vertical movements are allowed");if(o.isWalkableAt(e-1,t)&&!o.isWalkableAt(e-1,t-s)||o.isWalkableAt(e+1,t)&&!o.isWalkableAt(e+1,t-s))return res={jumppoint:[e,t],operations:r},res;if(check1=this._jump(e+1,t,e,t,r),check1)return res={jumppoint:[e,t],operations:check1.operations},res;if(check2=this._jump(e-1,t,e,t,check1.operations),check2)return res={jumppoint:[e,t],operations:check2.operations},res}return this._jump(e+a,t+s,e,t,r)},i.prototype._findNeighbors=function(e){var t,n,i,r,a,s,l,u,h=e.parent,p=e.x,c=e.y,d=this.grid,f=[];if(h)t=h.x,n=h.y,i=(p-t)/Math.max(Math.abs(p-t),1),r=(c-n)/Math.max(Math.abs(c-n),1),0!==i?(d.isWalkableAt(p,c-1)&&f.push([p,c-1]),d.isWalkableAt(p,c+1)&&f.push([p,c+1]),d.isWalkableAt(p+i,c)&&f.push([p+i,c])):0!==r&&(d.isWalkableAt(p-1,c)&&f.push([p-1,c]),d.isWalkableAt(p+1,c)&&f.push([p+1,c]),d.isWalkableAt(p,c+r)&&f.push([p,c+r]));else for(a=d.getNeighbors(e,o.Never),l=0,u=a.length;l<u;++l)s=a[l],f.push([s.x,s.y]);return f},t.exports=i},{"../core/DiagonalMovement":3,"./JumpPointFinderBase":24}],23:[function(e,t,n){function i(e){return e=e||{},e.diagonalMovement===r.Never?new o(e):e.diagonalMovement===r.Always?new a(e):e.diagonalMovement===r.OnlyWhenNoObstacles?new s(e):new l(e)}var r=e("../core/DiagonalMovement"),o=e("./JPFNeverMoveDiagonally"),a=e("./JPFAlwaysMoveDiagonally"),s=e("./JPFMoveDiagonallyIfNoObstacles"),l=e("./JPFMoveDiagonallyIfAtMostOneObstacle");t.exports=i},{"../core/DiagonalMovement":3,"./JPFAlwaysMoveDiagonally":19,"./JPFMoveDiagonallyIfAtMostOneObstacle":20,"./JPFMoveDiagonallyIfNoObstacles":21,"./JPFNeverMoveDiagonally":22}],24:[function(e,t,n){function i(e){e=e||{},this.heuristic=e.heuristic||a.manhattan,this.trackJumpRecursion=e.trackJumpRecursion||!1,console.log("recursion",this.trackJumpRecursion)}var r=e("heap"),o=e("../core/Util"),a=e("../core/Heuristic");e("../core/DiagonalMovement");i.prototype.findPath=function(e,t,n,i,a){var s,l=this.openList=new r(function(e,t){return e.f-t.f}),u=this.startNode=a.getNodeAt(e,t),h=this.endNode=a.getNodeAt(n,i);this.grid=a;var p=[];for(u.g=0,u.f=0,l.push(u),u.opened=!0,p.push({x:u.x,y:u.y,attr:"opened",value:!0});!l.empty();){if(s=l.pop(),s.closed=!0,p.push({x:s.x,y:s.y,attr:"closed",value:!0}),s===h)return res={path:o.expandPath(o.backtrace(h,p).path),operations:p},res;p=this._identifySuccessors(s,p)}return res={path:[],operations:p},res},i.prototype._identifySuccessors=function(e,t){var n,i,r,o,s,l,u,h,p,c,d=this.grid,f=this.heuristic,g=this.openList,v=this.endNode.x,y=this.endNode.y,b=e.x,m=e.y,A=Math.abs;Math.max;for(n=this._findNeighbors(e),o=0,s=n.length;o<s;++o)if(i=n[o],res=this._jump(i[0],i[1],b,m,t),r=res.jumppoint,t=res.operations,r){if(l=r[0],u=r[1],c=d.getNodeAt(l,u),c.closed)continue;h=a.octile(A(l-b),A(u-m)),p=e.g+h,(!c.opened||p<c.g)&&(c.g=p,c.h=c.h||f(A(l-v),A(u-y)),c.f=c.g+c.h,c.parent=e,c.opened?g.updateItem(c):(g.push(c),c.opened=!0,t.push({x:c.x,y:c.y,attr:"opened",value:!0})))}return t},t.exports=i},{"../core/DiagonalMovement":3,"../core/Heuristic":5,"../core/Util":7,heap:1}]},{},[8])(8)});